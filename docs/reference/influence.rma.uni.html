<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Outlier and Influential Case Diagnostics for 'rma.uni' Objects — influence.rma.uni • metafor</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Outlier and Influential Case Diagnostics for 'rma.uni' Objects — influence.rma.uni" />
<meta property="og:description" content="The functions can be used to compute various outlier and influential case diagnostics (some of which indicate the influence of deleting one case/study at a time on the model fit or the fitted/residual values) for objects of class &quot;rma.uni&quot;. For the corresponding help file for &quot;rma.mv&quot; objects, see influence.rma.mv. " />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">metafor</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.5-52</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/metafor-package.html">Intro</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../articles/pkgdown/diagram.html">Diagram</a>
</li>
<li>
  <a href="https://www.jstatsoft.org/index.php/jss/article/view/v036i03/v36i03.pdf">JSS Article (pdf)</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/wviechtb">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/wviechtb/metafor">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Outlier and Influential Case Diagnostics for 'rma.uni' Objects</h1>
    
    <div class="hidden name"><code>influence.rma.uni.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The functions can be used to compute various outlier and influential case diagnostics (some of which indicate the influence of deleting one case/study at a time on the model fit or the fitted/residual values) for objects of class <code>"rma.uni"</code>. For the corresponding help file for <code>"rma.mv"</code> objects, see <code><a href='influence.rma.mv.html'>influence.rma.mv</a></code>. <script id="MathJax-script" async src="../../mathjaxr/doc/mathjax/es5/tex-chtml-full.js"></script></p>
    </div>

    <pre class="usage"><span class='co'># S3 method for rma.uni</span>
<span class='fu'>influence</span><span class='op'>(</span><span class='va'>model</span>, <span class='va'>digits</span>, progbar<span class='op'>=</span><span class='cn'>FALSE</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for infl.rma.uni</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>x</span>, digits<span class='op'>=</span><span class='va'>x</span><span class='op'>$</span><span class='va'>digits</span>, infonly<span class='op'>=</span><span class='cn'>FALSE</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for rma.uni</span>
<span class='fu'>cooks.distance</span><span class='op'>(</span><span class='va'>model</span>, progbar<span class='op'>=</span><span class='cn'>FALSE</span>, <span class='va'>...</span><span class='op'>)</span>
<span class='co'># S3 method for rma.uni</span>
<span class='fu'>dfbetas</span><span class='op'>(</span><span class='va'>model</span>, progbar<span class='op'>=</span><span class='cn'>FALSE</span>, <span class='va'>...</span><span class='op'>)</span>
<span class='co'># S3 method for rma.uni</span>
<span class='fu'>hatvalues</span><span class='op'>(</span><span class='va'>model</span>, type<span class='op'>=</span><span class='st'>"diagonal"</span>, <span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>model</th>
      <td><p>an object of class <code>"rma.uni"</code>.</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>an object of class <code>"infl.rma.uni"</code> (for <code>print</code>).</p></td>
    </tr>
    <tr>
      <th>digits</th>
      <td><p>integer specifying the number of decimal places to which the printed results should be rounded (if unspecified, the default is to take the value from the object).</p></td>
    </tr>
    <tr>
      <th>progbar</th>
      <td><p>logical indicating whether a progress bar should be shown (the default is <code>FALSE</code>).</p></td>
    </tr>
    <tr>
      <th>infonly</th>
      <td><p>logical indicating whether only the influential cases should be printed (the default is <code>FALSE</code>).</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>character string indicating whether to return only the diagonal of the hat matrix (<code>"diagonal"</code>) or the entire hat matrix (<code>"matrix"</code>).</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>other arguments.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The <code>influence</code> function calculates the following leave-one-out diagnostics for each study:</p><ul>
<li><p>externally standardized residual,</p></li>
<li><p>DFFITS value,</p></li>
<li><p>Cook's distance,</p></li>
<li><p>covariance ratio,</p></li>
<li><p>the leave-one-out amount of (residual) heterogeneity,</p></li>
<li><p>the leave-one-out test statistic of the test for (residual) heterogeneity,</p></li>
<li><p>DFBETAS value(s).</p></li>
</ul><p>The diagonal elements of the hat matrix and the weights (in %) given to the observed effects or outcomes during the model fitting are also provided (except for their scaling, the hat values and weights are the same for models without moderators, but will differ when moderators are included).</p>
<p>For details on externally standardized residuals, see <code><a href='residuals.rma.html'>rstudent.rma.uni</a></code>.</p>
<p>The DFFITS value essentially indicates how many standard deviations the predicted (average) effect for the \(i\)th study changes after excluding the \(i\)th study from the model fitting.</p>
<p>Cook's distance can be interpreted as the Mahalanobis distance between the entire set of predicted values once with the \(i\)th study included and once with the \(i\)th study excluded from the model fitting.</p>
<p>The covariance ratio is defined as the determinant of the variance-covariance matrix of the parameter estimates based on the dataset with the \(i\)th study removed divided by the determinant of the variance-covariance matrix of the parameter estimates based on the complete dataset. A value below 1 therefore indicates that removal of the \(i\)th study yields more precise estimates of the model coefficients.</p>
<p>The leave-one-out amount of (residual) heterogeneity is the estimated value of \(\tau^2\) based on the dataset with the \(i\)th study removed. This is always equal to <code>0</code> for fixed-effects models.</p>
<p>Similarly, the leave-one-out test statistic of the test for (residual) heterogeneity is the value of the test statistic of the test for (residual) heterogeneity calculated based on the dataset with the \(i\)th study removed.</p>
<p>Finally, the DFBETAS value(s) essentially indicate(s) how many standard deviations the estimated coefficient(s) change(s) after excluding the \(i\)th study from the model fitting.</p>
<p>A study may be considered to be &#8216;influential&#8217; if at least one of the following is true:</p><ul>
<li><p>The absolute DFFITS value is larger than \(3 \times \sqrt{p/(k-p)}\), where \(p\) is the number of model coefficients and \(k\) the number of studies.</p></li>
<li><p>The lower tail area of a chi-square distribution with \(p\) degrees of freedom cut off by the Cook's distance is larger than 50%.</p></li>
<li><p>The hat value is larger than \(3 \times (p/k)\).</p></li>
<li><p>Any DFBETAS value is larger than \(1\).</p></li>
</ul><p>Studies which are considered influential with respect to any of these measures are marked with an asterisk. Note that the chosen cut-offs are (somewhat) arbitrary. Substantively informed judgment should always be used when examining the influence of each study on the results.</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class <code>"infl.rma.uni"</code>, which is a list containing the following components:</p>
<dt>inf</dt><dd><p>an element of class <code>"list.rma"</code> with the externally standardized residuals, DFFITS values, Cook's distances, covariance ratios, leave-one-out \(\tau^2\) estimates, leave-one-out (residual) heterogeneity test statistics, hat values, weights, and an indicator whether a study is influential or not.</p></dd>
   <dt>dfbs</dt><dd><p>an element of class <code>"list.rma"</code> with the the DFBETAS values.</p></dd>
   <dt>...</dt><dd><p>some additional elements/values.</p></dd>

   The results are printed with print.infl.rma.uni and plotted with <a href='plot.infl.rma.uni.html'>plot.infl.rma.uni</a>.

    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>Right now, leave-one-out diagnostics are calculated by refitting the model \(k\) times. Depending on how large \(k\) is, it may take a few moments to finish the calculations. There are shortcuts for calculating at least some of these values without refitting the model each time, but these are currently not implemented (and may not exist for all of the leave-one-out diagnostics calculated by the function).</p>
<p>It may not be possible to fit the model after deletion of the \(i\)th study from the dataset. This will result in <code>NA</code> values for that study.</p>
<p>Certain relationships between the leave-one-out diagnostics and the (internally or externally) standardized residuals (Belsley, Kuh, &amp; Welsch, 1980; Cook &amp; Weisberg, 1982) no longer hold for the meta-analytic models. Maybe there are other relationships. These remain to be determined.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Wolfgang Viechtbauer <a href='mailto:wvb@metafor-project.org'>wvb@metafor-project.org</a> <a href='http://www.metafor-project.org'>http://www.metafor-project.org</a></p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Belsley, D. A., Kuh, E., &amp; Welsch, R. E. (1980). <em>Regression diagnostics</em>. New York: Wiley.</p>
<p>Cook, R. D., &amp; Weisberg, S. (1982). <em>Residuals and influence in regression</em>. London: Chapman and Hall.</p>
<p>Hedges, L. V., &amp; Olkin, I. (1985). <em>Statistical methods for meta-analysis</em>. San Diego, CA: Academic Press.</p>
<p>Viechtbauer, W. (2010). Conducting meta-analyses in R with the metafor package. <em>Journal of Statistical Software</em>, <b>36</b>(3), 1--48. <a href='https://doi.org/10.18637/jss.v036.i03'>https://doi.org/10.18637/jss.v036.i03</a></p>
<p>Viechtbauer, W., &amp; Cheung, M. W.-L. (2010). Outlier and influence diagnostics for meta-analysis. <em>Research Synthesis Methods</em>, <b>1</b>(2), 112--125. <a href='https://doi.org/10.1002/jrsm.11'>https://doi.org/10.1002/jrsm.11</a></p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='plot.infl.rma.uni.html'>plot.infl.rma.uni</a></code>, <code><a href='residuals.rma.html'>rstudent.rma.uni</a></code>, <code><a href='weights.rma.uni.html'>weights.rma.uni</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>### meta-analysis of the log risk ratios using a mixed-effects model</span>
<span class='co'>### with two moderators (absolute latitude and publication year)</span>
<span class='va'>res</span> <span class='op'>&lt;-</span> <span class='fu'><a href='rma.uni.html'>rma</a></span><span class='op'>(</span>measure<span class='op'>=</span><span class='st'>"RR"</span>, ai<span class='op'>=</span><span class='va'>tpos</span>, bi<span class='op'>=</span><span class='va'>tneg</span>, ci<span class='op'>=</span><span class='va'>cpos</span>, di<span class='op'>=</span><span class='va'>cneg</span>,
           mods <span class='op'>=</span> <span class='op'>~</span> <span class='va'>ablat</span> <span class='op'>+</span> <span class='va'>year</span>, data<span class='op'>=</span><span class='va'>dat.bcg</span><span class='op'>)</span>

<span class='va'>inf</span> <span class='op'>&lt;-</span> <span class='fu'>influence</span><span class='op'>(</span><span class='va'>res</span><span class='op'>)</span>
<span class='va'>inf</span>
</div><div class='output co'>#&gt; $inf
#&gt; 
#&gt;    rstudent  dffits cook.d  cov.r tau2.del  QE.del    hat  weight inf 
#&gt; 1    0.2978  0.1785 0.0348 1.8003   0.1317 28.3142 0.1725  3.3664     
#&gt; 2   -0.4303 -0.2368 0.0620 1.9207   0.1308 27.5744 0.2367  4.8106     
#&gt; 3   -0.5100 -0.1094 0.0125 1.2348   0.1191 27.7572 0.0487  2.7920     
#&gt; 4   -1.4032 -2.9415 7.3179 3.5225   0.0906 23.1836 0.8082 11.2312   * 
#&gt; 5   -0.1490 -0.0263 0.0032 2.6341   0.1497 27.2543 0.2483  9.0681     
#&gt; 6    1.0551  0.8926 0.7205 1.3621   0.0994 21.2875 0.4061 12.4817     
#&gt; 7   -2.5961 -0.6815 0.4173 0.2379   0.0544 19.1240 0.0766  4.4008     
#&gt; 8    0.4793  0.3703 0.1899 2.9984   0.1498 24.1266 0.3627 12.8020     
#&gt; 9    0.2027  0.1305 0.0237 2.2071   0.1501 28.2874 0.1030  8.7848     
#&gt; 10  -0.9872 -0.3870 0.1470 1.0702   0.1072 24.7567 0.1310  7.9919     
#&gt; 11  -0.1197 -0.0030 0.0052 2.8336   0.1583 25.5103 0.2214 11.9238     
#&gt; 12   1.4677  0.2171 0.0469 0.9274   0.1059 26.1197 0.0235  2.2836     
#&gt; 13   2.1302  0.8150 0.4994 0.2178   0.0498 21.4920 0.1612  8.0630     
#&gt; 
#&gt; $dfbs
#&gt; 
#&gt;    intrcpt   ablat    year 
#&gt; 1   0.1492 -0.0622 -0.1491 
#&gt; 2  -0.0949 -0.1001  0.0963 
#&gt; 3  -0.0280 -0.0403  0.0283 
#&gt; 4   2.2248 -2.5380 -2.2161 
#&gt; 5   0.0350  0.0063 -0.0354 
#&gt; 6   0.5935 -0.0008 -0.5954 
#&gt; 7  -0.2659  0.5368  0.2591 
#&gt; 8  -0.0394 -0.2110  0.0431 
#&gt; 9   0.0728 -0.0865 -0.0718 
#&gt; 10 -0.1188 -0.0973  0.1194 
#&gt; 11  0.0631 -0.0343 -0.0631 
#&gt; 12 -0.0413  0.0465  0.0419 
#&gt; 13 -0.8276  0.6269  0.8279 
#&gt; </div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>inf</span><span class='op'>)</span>
</div><div class='img'><img src='influence.rma.uni-1.png' alt='' width='768' height='614' /></div><div class='input'>
<span class='fu'>cooks.distance</span><span class='op'>(</span><span class='va'>res</span><span class='op'>)</span>
</div><div class='output co'>#&gt;           1           2           3           4           5           6 
#&gt; 0.034763870 0.061956371 0.012503192 7.317914072 0.003236974 0.720524896 
#&gt;           7           8           9          10          11          12 
#&gt; 0.417263935 0.189852980 0.023722929 0.146959603 0.005232795 0.046915399 
#&gt;          13 
#&gt; 0.499370065 </div><div class='input'><span class='fu'>dfbetas</span><span class='op'>(</span><span class='va'>res</span><span class='op'>)</span>
</div><div class='output co'>#&gt; 
#&gt;    intrcpt   ablat    year 
#&gt; 1   0.1492 -0.0622 -0.1491 
#&gt; 2  -0.0949 -0.1001  0.0963 
#&gt; 3  -0.0280 -0.0403  0.0283 
#&gt; 4   2.2248 -2.5380 -2.2161 
#&gt; 5   0.0350  0.0063 -0.0354 
#&gt; 6   0.5935 -0.0008 -0.5954 
#&gt; 7  -0.2659  0.5368  0.2591 
#&gt; 8  -0.0394 -0.2110  0.0431 
#&gt; 9   0.0728 -0.0865 -0.0718 
#&gt; 10 -0.1188 -0.0973  0.1194 
#&gt; 11  0.0631 -0.0343 -0.0631 
#&gt; 12 -0.0413  0.0465  0.0419 
#&gt; 13 -0.8276  0.6269  0.8279 
#&gt; </div><div class='input'><span class='fu'>hatvalues</span><span class='op'>(</span><span class='va'>res</span><span class='op'>)</span>
</div><div class='output co'>#&gt;          1          2          3          4          5          6          7 
#&gt; 0.17250070 0.23668273 0.04870101 0.80821407 0.24826116 0.40606407 0.07657599 
#&gt;          8          9         10         11         12         13 
#&gt; 0.36274386 0.10304034 0.13102564 0.22140605 0.02353859 0.16124580 </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Wolfgang Viechtbauer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


