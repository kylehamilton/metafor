<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Studies on the Effectiveness of Counseling for Smoking Cessation — dat.hasselblad1998 • metafor</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Studies on the Effectiveness of Counseling for Smoking Cessation — dat.hasselblad1998" />
<meta property="og:description" content="Results from 24 studies on the effectiveness of various counseling types for smoking cessation." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">metafor</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.5-52</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/metafor-package.html">Intro</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../articles/pkgdown/diagram.html">Diagram</a>
</li>
<li>
  <a href="https://www.jstatsoft.org/index.php/jss/article/view/v036i03/v36i03.pdf">JSS Article (pdf)</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/wviechtb">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/wviechtb/metafor">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Studies on the Effectiveness of Counseling for Smoking Cessation</h1>
    
    <div class="hidden name"><code>dat.hasselblad1998.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Results from 24 studies on the effectiveness of various counseling types for smoking cessation.</p>
    </div>

    <pre class="usage"><span class='va'>dat.hasselblad1998</span></pre>


    <h2 class="hasAnchor" id="format"><a class="anchor" href="#format"></a>Format</h2>

    <p>The data frame contains the following columns:</p><table class='table'>
<tr><td><b>id</b></td><td><code>numeric</code></td><td>id number for each treatment arm</td></tr>
<tr><td><b>study</b></td><td><code>numeric</code></td><td>study id number</td></tr>
<tr><td><b>authors</b></td><td><code>character</code></td><td>study author(s)</td></tr>
<tr><td><b>year</b></td><td><code>numeric</code></td><td>publication year</td></tr>
<tr><td><b>trt</b></td><td><code>character</code></td><td>intervention group</td></tr>
<tr><td><b>xi</b></td><td><code>numeric</code></td><td>number of individuals abstinent</td></tr>
<tr><td><b>ni</b></td><td><code>numeric</code></td><td>number of individuals in group</td></tr>
</table>


    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The dataset includes the results from 24 studies on the effectiveness of various counseling types for smoking cessation (i.e., self-help, individual counseling, group counseling, and no contact). The dataset indicates the total number of individuals within each study arm and the number that were abstinent from 6 to 12 months. The majority of the studies compared two interventions types against each other, while 2 studies compared three types against each other simultaneously.</p>
<p>The data can be used for a &#8216;network meta-analysis&#8217; (also called &#8216;mixed treatment comparison meta-analysis&#8217;). The code below shows how such an analysis can be conducted using an arm-based and a contrast-based model (see Salanti et al., 2008, for more details).</p>
    <h2 class="hasAnchor" id="source"><a class="anchor" href="#source"></a>Source</h2>

    <p>Hasselblad, V. (1998). Meta-analysis of multitreatment studies. <em>Medical Decision Making</em>, <b>18</b>(1), 37--43. <a href='https://doi.org/10.1177/0272989X9801800110'>https://doi.org/10.1177/0272989X9801800110</a></p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Gleser, L. J., &amp; Olkin, I. (2009). Stochastically dependent effect sizes. In H. Cooper, L. V. Hedges, &amp; J. C. Valentine (Eds.), <em>The handbook of research synthesis and meta-analysis</em> (2nd ed., pp. 357--376). New York: Russell Sage Foundation.</p>
<p>Law, M., Jackson, D., Turner, R., Rhodes, K., &amp; Viechtbauer, W. (2016). Two new methods to fit models for network meta-analysis with random inconsistency effects. <em>BMC Medical Research Methodology</em>, <b>16</b>, 87. <a href='https://doi.org/10.1186/s12874-016-0184-5'>https://doi.org/10.1186/s12874-016-0184-5</a></p>
<p>Salanti, G., Higgins, J. P. T., Ades, A. E., &amp; Ioannidis, J. P. A. (2008). Evaluation of networks of randomized trials. <em>Statistical Methods in Medical Research</em>, <b>17</b>(3), 279--301. <a href='https://doi.org/10.1177/0962280207080643'>https://doi.org/10.1177/0962280207080643</a></p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>### copy data into 'dat'</span>
<span class='va'>dat</span> <span class='op'>&lt;-</span> <span class='va'>dat.hasselblad1998</span>
<span class='va'>dat</span>
</div><div class='output co'>#&gt;    id study            authors year            trt  xi   ni
#&gt; 1   1     1        Reid et al. 1974     no_contact  75  731
#&gt; 2   2     1        Reid et al. 1974 ind_counseling 363  714
#&gt; 3   3     2    Cottraux et al. 1983     no_contact   9  140
#&gt; 4   4     2    Cottraux et al. 1983 ind_counseling  23  140
#&gt; 5   5     2    Cottraux et al. 1983 grp_counseling  10  138
#&gt; 6   6     3       Slama et al. 1990     no_contact   2  106
#&gt; 7   7     3       Slama et al. 1990 ind_counseling   9  205
#&gt; 8   8     4    Jamrozik et al. 1984     no_contact  58  549
#&gt; 9   9     4    Jamrozik et al. 1984 ind_counseling 237 1561
#&gt; 10 10     5      Rabkin et al. 1984     no_contact   0   33
#&gt; 11 11     5      Rabkin et al. 1984 ind_counseling   9   48
#&gt; 12 12     6   Decker and Evans 1989      self_help  20   49
#&gt; 13 13     6   Decker and Evans 1989 ind_counseling  16   43
#&gt; 14 14     7    Richmond et al. 1986     no_contact   3  100
#&gt; 15 15     7    Richmond et al. 1986 ind_counseling  31   98
#&gt; 16 16     8              Leung 1991     no_contact   1   31
#&gt; 17 17     8              Leung 1991 ind_counseling  26   95
#&gt; 18 18     9  Mothersill et al. 1988      self_help  11   78
#&gt; 19 19     9  Mothersill et al. 1988 ind_counseling  12   85
#&gt; 20 20     9  Mothersill et al. 1988 grp_counseling  29  170
#&gt; 21 21    10    Langford et al. 1983     no_contact   6   39
#&gt; 22 22    10    Langford et al. 1983 ind_counseling  17   77
#&gt; 23 23    11       Gritz et al. 1992     no_contact  79  702
#&gt; 24 24    11       Gritz et al. 1992      self_help  77  694
#&gt; 25 25    12    Campbell et al. 1986     no_contact  18  671
#&gt; 26 26    12    Campbell et al. 1986      self_help  21  535
#&gt; 27 27    13     Sanders et al. 1989     no_contact  64  642
#&gt; 28 28    13     Sanders et al. 1989 ind_counseling 107  761
#&gt; 29 29    14    Hilleman et al. 1993 ind_counseling  12   76
#&gt; 30 30    14    Hilleman et al. 1993 grp_counseling  20   74
#&gt; 31 31    15     Gillams et al. 1984 ind_counseling   9   55
#&gt; 32 32    15     Gillams et al. 1984 grp_counseling   3   26
#&gt; 33 33    16 Mogielnicki et al. 1986      self_help   7   66
#&gt; 34 34    16 Mogielnicki et al. 1986 grp_counseling  32  127
#&gt; 35 35    17        Page et al. 1986     no_contact   5   62
#&gt; 36 36    17        Page et al. 1986 ind_counseling   8   90
#&gt; 37 37    18    Vetter and Ford 1990     no_contact  20  234
#&gt; 38 38    18    Vetter and Ford 1990 ind_counseling  34  237
#&gt; 39 39    19  Williams and Hall 1988     no_contact   0   20
#&gt; 40 40    19  Williams and Hall 1988 grp_counseling   9   20
#&gt; 41 41    20    Pallonen et al. 1994     no_contact   8  116
#&gt; 42 42    20    Pallonen et al. 1994      self_help  19  149
#&gt; 43 43    21     Russell et al. 1983     no_contact  95 1107
#&gt; 44 44    21     Russell et al. 1983 ind_counseling 143 1031
#&gt; 45 45    22 Stewart and Rosser 1982     no_contact  15  187
#&gt; 46 46    22 Stewart and Rosser 1982 ind_counseling  36  504
#&gt; 47 47    23     Russell et al. 1979     no_contact  78  584
#&gt; 48 48    23     Russell et al. 1979 ind_counseling  73  675
#&gt; 49 49    24    Kendrick et al. 1995     no_contact  69 1177
#&gt; 50 50    24    Kendrick et al. 1995 ind_counseling  54  888</div><div class='input'>
<span class='co'>### create network graph ('plyr' and 'igraph' packages must be installed)</span>
<span class='co'># \dontrun{</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='https://igraph.org'>igraph</a></span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Loading required package: igraph</span></div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>Attaching package: ‘igraph’</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from ‘package:stats’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    decompose, spectrum</span></div><div class='output co'>#&gt; <span class='message'>The following object is masked from ‘package:base’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    union</span></div><div class='input'><span class='va'>pairs</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/do.call.html'>do.call</a></span><span class='op'>(</span><span class='va'>rbind</span>,
   <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>sapply</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/split.html'>split</a></span><span class='op'>(</span><span class='va'>dat</span><span class='op'>$</span><span class='va'>trt</span>, <span class='va'>dat</span><span class='op'>$</span><span class='va'>study</span><span class='op'>)</span>, <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/t.html'>t</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/utils/combn.html'>combn</a></span><span class='op'>(</span><span class='va'>x</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>, stringsAsFactors<span class='op'>=</span><span class='cn'>FALSE</span><span class='op'>)</span>
<span class='va'>lvls</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"no_contact"</span>, <span class='st'>"self_help"</span>, <span class='st'>"ind_counseling"</span>, <span class='st'>"grp_counseling"</span><span class='op'>)</span>
<span class='va'>pairs</span><span class='op'>$</span><span class='va'>X1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>pairs</span><span class='op'>$</span><span class='va'>X1</span>, levels<span class='op'>=</span><span class='va'>lvls</span><span class='op'>)</span>
<span class='va'>pairs</span><span class='op'>$</span><span class='va'>X2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>pairs</span><span class='op'>$</span><span class='va'>X2</span>, levels<span class='op'>=</span><span class='va'>lvls</span><span class='op'>)</span>
<span class='va'>tab</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span><span class='va'>pairs</span><span class='op'>[</span>,<span class='fl'>1</span><span class='op'>]</span>, <span class='va'>pairs</span><span class='op'>[</span>,<span class='fl'>2</span><span class='op'>]</span><span class='op'>)</span>
<span class='va'>tab</span> <span class='co'># adjacency matrix</span>
</div><div class='output co'>#&gt;                 
#&gt;                  no_contact self_help ind_counseling grp_counseling
#&gt;   no_contact              0         3             15              2
#&gt;   self_help               0         0              2              2
#&gt;   ind_counseling          0         0              0              4
#&gt;   grp_counseling          0         0              0              0</div><div class='input'><span class='va'>g</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/igraph/man/graph_from_adjacency_matrix.html'>graph_from_adjacency_matrix</a></span><span class='op'>(</span><span class='va'>tab</span>, mode <span class='op'>=</span> <span class='st'>"plus"</span>, weighted<span class='op'>=</span><span class='cn'>TRUE</span>, diag<span class='op'>=</span><span class='cn'>FALSE</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/igraph/man/vertex_attr.html'>vertex_attr</a></span><span class='op'>(</span><span class='va'>g</span>, <span class='st'>"name"</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"No Contact"</span>, <span class='st'>"Self-Help"</span>,
                            <span class='st'>"Individual\nCounseling"</span>, <span class='st'>"Group\nCounseling"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>g</span>, edge.curved<span class='op'>=</span><span class='cn'>FALSE</span>, edge.width<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/pkg/igraph/man/E.html'>E</a></span><span class='op'>(</span><span class='va'>g</span><span class='op'>)</span><span class='op'>$</span><span class='va'>weight</span>, layout<span class='op'>=</span><span class='va'>layout_on_grid</span>,
     vertex.size<span class='op'>=</span><span class='fl'>45</span>, vertex.color<span class='op'>=</span><span class='st'>"lightgray"</span>, vertex.label.color<span class='op'>=</span><span class='st'>"black"</span>, vertex.label.font<span class='op'>=</span><span class='fl'>2</span><span class='op'>)</span><span class='co'># }</span>
</div><div class='img'><img src='dat.hasselblad1998-1.png' alt='' width='768' height='614' /></div><div class='input'>
<span class='co'>### calculate log odds for each study arm</span>
<span class='va'>dat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='escalc.html'>escalc</a></span><span class='op'>(</span>measure<span class='op'>=</span><span class='st'>"PLO"</span>, xi<span class='op'>=</span><span class='va'>xi</span>, ni<span class='op'>=</span><span class='va'>ni</span>, add<span class='op'>=</span><span class='fl'>1</span><span class='op'>/</span><span class='fl'>2</span>, to<span class='op'>=</span><span class='st'>"all"</span>, data<span class='op'>=</span><span class='va'>dat</span><span class='op'>)</span>
<span class='va'>dat</span>
</div><div class='output co'>#&gt;    id study            authors year            trt  xi   ni      yi     vi 
#&gt; 1   1     1        Reid et al. 1974     no_contact  75  731 -2.1628 0.0148 
#&gt; 2   2     1        Reid et al. 1974 ind_counseling 363  714  0.0336 0.0056 
#&gt; 3   3     2    Cottraux et al. 1983     no_contact   9  140 -2.6277 0.1129 
#&gt; 4   4     2    Cottraux et al. 1983 ind_counseling  23  140 -1.6094 0.0511 
#&gt; 5   5     2    Cottraux et al. 1983 grp_counseling  10  138 -2.5046 0.1030 
#&gt; 6   6     3       Slama et al. 1990     no_contact   2  106 -3.7329 0.4096 
#&gt; 7   7     3       Slama et al. 1990 ind_counseling   9  205 -3.0294 0.1104 
#&gt; 8   8     4    Jamrozik et al. 1984     no_contact  58  549 -2.1284 0.0191 
#&gt; 9   9     4    Jamrozik et al. 1984 ind_counseling 237 1561 -1.7186 0.0050 
#&gt; 10 10     5      Rabkin et al. 1984     no_contact   0   33 -4.2047 2.0299 
#&gt; 11 11     5      Rabkin et al. 1984 ind_counseling   9   48 -1.4250 0.1306 
#&gt; 12 12     6   Decker and Evans 1989      self_help  20   49 -0.3640 0.0827 
#&gt; 13 13     6   Decker and Evans 1989 ind_counseling  16   43 -0.5108 0.0970 
#&gt; 14 14     7    Richmond et al. 1986     no_contact   3  100 -3.3271 0.2960 
#&gt; 15 15     7    Richmond et al. 1986 ind_counseling  31   98 -0.7621 0.0466 
#&gt; 16 16     8              Leung 1991     no_contact   1   31 -3.0123 0.6995 
#&gt; 17 17     8              Leung 1991 ind_counseling  26   95 -0.9642 0.0521 
#&gt; 18 18     9  Mothersill et al. 1988      self_help  11   78 -1.7698 0.1018 
#&gt; 19 19     9  Mothersill et al. 1988 ind_counseling  12   85 -1.7716 0.0936 
#&gt; 20 20     9  Mothersill et al. 1988 grp_counseling  29  170 -1.5679 0.0410 
#&gt; 21 21    10    Langford et al. 1983     no_contact   6   39 -1.6397 0.1837 
#&gt; 22 22    10    Langford et al. 1983 ind_counseling  17   77 -1.2404 0.0737 
#&gt; 23 23    11       Gritz et al. 1992     no_contact  79  702 -2.0596 0.0142 
#&gt; 24 24    11       Gritz et al. 1992      self_help  77  694 -2.0754 0.0145 
#&gt; 25 25    12    Campbell et al. 1986     no_contact  18  671 -3.5646 0.0556 
#&gt; 26 26    12    Campbell et al. 1986      self_help  21  535 -3.1751 0.0485 
#&gt; 27 27    13     Sanders et al. 1989     no_contact  64  642 -2.1938 0.0172 
#&gt; 28 28    13     Sanders et al. 1989 ind_counseling 107  761 -1.8064 0.0108 
#&gt; 29 29    14    Hilleman et al. 1993 ind_counseling  12   76 -1.6409 0.0955 
#&gt; 30 30    14    Hilleman et al. 1993 grp_counseling  20   74 -0.9778 0.0671 
#&gt; 31 31    15     Gillams et al. 1984 ind_counseling   9   55 -1.5882 0.1268 
#&gt; 32 32    15     Gillams et al. 1984 grp_counseling   3   26 -1.9042 0.3283 
#&gt; 33 33    16 Mogielnicki et al. 1986      self_help   7   66 -2.0711 0.1501 
#&gt; 34 34    16 Mogielnicki et al. 1986 grp_counseling  32  127 -1.0779 0.0412 
#&gt; 35 35    17        Page et al. 1986     no_contact   5   62 -2.3470 0.1992 
#&gt; 36 36    17        Page et al. 1986 ind_counseling   8   90 -2.2727 0.1298 
#&gt; 37 37    18    Vetter and Ford 1990     no_contact  20  234 -2.3479 0.0534 
#&gt; 38 38    18    Vetter and Ford 1990 ind_counseling  34  237 -1.7747 0.0339 
#&gt; 39 39    19  Williams and Hall 1988     no_contact   0   20 -3.7136 2.0488 
#&gt; 40 40    19  Williams and Hall 1988 grp_counseling   9   20 -0.1911 0.1922 
#&gt; 41 41    20    Pallonen et al. 1994     no_contact   8  116 -2.5467 0.1269 
#&gt; 42 42    20    Pallonen et al. 1994      self_help  19  149 -1.9010 0.0589 
#&gt; 43 43    21     Russell et al. 1983     no_contact  95 1107 -2.3611 0.0115 
#&gt; 44 44    21     Russell et al. 1983 ind_counseling 143 1031 -1.8232 0.0081 
#&gt; 45 45    22 Stewart and Rosser 1982     no_contact  15  187 -2.4096 0.0703 
#&gt; 46 46    22 Stewart and Rosser 1982 ind_counseling  36  504 -2.5522 0.0295 
#&gt; 47 47    23     Russell et al. 1979     no_contact  78  584 -1.8644 0.0147 
#&gt; 48 48    23     Russell et al. 1979 ind_counseling  73  675 -2.1038 0.0153 
#&gt; 49 49    24    Kendrick et al. 1995     no_contact  69 1177 -2.7694 0.0153 
#&gt; 50 50    24    Kendrick et al. 1995 ind_counseling  54  888 -2.7286 0.0195 </div><div class='input'>
<span class='co'>### convert trt variable to factor with desired ordering of levels</span>
<span class='va'>dat</span><span class='op'>$</span><span class='va'>trt</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>dat</span><span class='op'>$</span><span class='va'>trt</span>, levels<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"no_contact"</span>, <span class='st'>"self_help"</span>, <span class='st'>"ind_counseling"</span>, <span class='st'>"grp_counseling"</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'>### add a space before each level (this makes the output a bit more legible)</span>
<span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>dat</span><span class='op'>$</span><span class='va'>trt</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>" "</span>, <span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>dat</span><span class='op'>$</span><span class='va'>trt</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'>### network meta-analysis using an arm-based model with fixed study effects</span>
<span class='co'>### by setting rho=1/2, tau^2 reflects the amount of heterogeneity for all treatment comparisons</span>
<span class='va'>res</span> <span class='op'>&lt;-</span> <span class='fu'><a href='rma.mv.html'>rma.mv</a></span><span class='op'>(</span><span class='va'>yi</span>, <span class='va'>vi</span>, mods <span class='op'>=</span> <span class='op'>~</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>study</span><span class='op'>)</span> <span class='op'>+</span> <span class='va'>trt</span> <span class='op'>-</span> <span class='fl'>1</span>,
              random <span class='op'>=</span> <span class='op'>~</span> <span class='va'>trt</span> <span class='op'>|</span> <span class='va'>study</span>, rho<span class='op'>=</span><span class='fl'>1</span><span class='op'>/</span><span class='fl'>2</span>, data<span class='op'>=</span><span class='va'>dat</span>, btt<span class='op'>=</span><span class='st'>"trt"</span><span class='op'>)</span>
<span class='va'>res</span>
</div><div class='output co'>#&gt; 
#&gt; Multivariate Meta-Analysis Model (k = 50; method: REML)
#&gt; 
#&gt; Variance Components:
#&gt; 
#&gt; outer factor: study (nlvls = 24)
#&gt; inner factor: trt   (nlvls = 4)
#&gt; 
#&gt;             estim    sqrt  fixed 
#&gt; tau^2      0.4324  0.6575     no 
#&gt; rho        0.5000            yes 
#&gt; 
#&gt; Test for Residual Heterogeneity:
#&gt; QE(df = 23) = 202.3334, p-val &lt; .0001
#&gt; 
#&gt; Test of Moderators (coefficients 25:27):
#&gt; QM(df = 3) = 14.2278, p-val = 0.0026
#&gt; 
#&gt; Model Results:
#&gt; 
#&gt;                     estimate      se     zval    pval    ci.lb    ci.ub 
#&gt; factor(study)1       -1.3925  0.5820  -2.3926  0.0167  -2.5333  -0.2518    * 
#&gt; factor(study)2       -2.7302  0.5842  -4.6731  &lt;.0001  -3.8753  -1.5851  *** 
#&gt; factor(study)3       -3.7217  0.6681  -5.5703  &lt;.0001  -5.0312  -2.4121  *** 
#&gt; factor(study)4       -2.2710  0.5829  -3.8958  &lt;.0001  -3.4136  -1.1285  *** 
#&gt; factor(study)5       -2.3914  0.7374  -3.2430  0.0012  -3.8367  -0.9461   ** 
#&gt; factor(study)6       -0.9698  0.6421  -1.5104  0.1309  -2.2284   0.2887      
#&gt; factor(study)7       -2.0855  0.6369  -3.2744  0.0011  -3.3339  -0.8372   ** 
#&gt; factor(study)8       -1.9592  0.6674  -2.9357  0.0033  -3.2672  -0.6512   ** 
#&gt; factor(study)9       -2.3487  0.6032  -3.8936  &lt;.0001  -3.5310  -1.1664  *** 
#&gt; factor(study)10      -1.8062  0.6296  -2.8688  0.0041  -3.0402  -0.5722   ** 
#&gt; factor(study)11      -2.2618  0.5978  -3.7835  0.0002  -3.4334  -1.0901  *** 
#&gt; factor(study)12      -3.5643  0.6139  -5.8058  &lt;.0001  -4.7675  -2.3610  *** 
#&gt; factor(study)13      -2.3454  0.5836  -4.0188  &lt;.0001  -3.4892  -1.2015  *** 
#&gt; factor(study)14      -2.0624  0.6492  -3.1767  0.0015  -3.3348  -0.7899   ** 
#&gt; factor(study)15      -2.4575  0.6868  -3.5781  0.0003  -3.8037  -1.1114  *** 
#&gt; factor(study)16      -2.1438  0.6707  -3.1964  0.0014  -3.4583  -0.8293   ** 
#&gt; factor(study)17      -2.6810  0.6448  -4.1581  &lt;.0001  -3.9447  -1.4173  *** 
#&gt; factor(study)18      -2.4066  0.5964  -4.0353  &lt;.0001  -3.5755  -1.2377  *** 
#&gt; factor(study)19      -1.4441  0.8108  -1.7811  0.0749  -3.0331   0.1450    . 
#&gt; factor(study)20      -2.4041  0.6331  -3.7974  0.0001  -3.6450  -1.1633  *** 
#&gt; factor(study)21      -2.4359  0.5817  -4.1877  &lt;.0001  -3.5760  -1.2958  *** 
#&gt; factor(study)22      -2.8559  0.5991  -4.7667  &lt;.0001  -4.0301  -1.6816  *** 
#&gt; factor(study)23      -2.3268  0.5838  -3.9857  &lt;.0001  -3.4710  -1.1826  *** 
#&gt; factor(study)24      -3.0893  0.5847  -5.2836  &lt;.0001  -4.2353  -1.9433  *** 
#&gt; trt self_help         0.3888  0.3221   1.2070  0.2274  -0.2426   1.0202      
#&gt; trt ind_counseling    0.6864  0.1904   3.6055  0.0003   0.3133   1.0596  *** 
#&gt; trt grp_counseling    0.8438  0.3641   2.3176  0.0205   0.1302   1.5574    * 
#&gt; 
#&gt; ---
#&gt; Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1
#&gt; </div><div class='input'>
<span class='co'>### all pairwise odds ratios of interventions versus no contact</span>
<span class='fu'><a href='predict.rma.html'>predict</a></span><span class='op'>(</span><span class='va'>res</span>, newmods<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span><span class='fl'>0</span>, nrow<span class='op'>=</span><span class='fl'>3</span>, ncol<span class='op'>=</span><span class='fl'>24</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/diag.html'>diag</a></span><span class='op'>(</span><span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span>,
        intercept<span class='op'>=</span><span class='cn'>FALSE</span>, transf<span class='op'>=</span><span class='va'>exp</span>, digits<span class='op'>=</span><span class='fl'>2</span><span class='op'>)</span>
</div><div class='output co'>#&gt; 
#&gt;   pred ci.lb ci.ub pi.lb pi.ub 
#&gt; 1 1.48  0.78  2.77  0.35  6.20 
#&gt; 2 1.99  1.37  2.89  0.52  7.60 
#&gt; 3 2.33  1.14  4.75  0.53 10.14 
#&gt; </div><div class='input'>
<span class='co'>### all pairwise odds ratios comparing interventions (ic vs sh, gc vs sh, and gc vs ic)</span>
<span class='fu'><a href='predict.rma.html'>predict</a></span><span class='op'>(</span><span class='va'>res</span>, newmods<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span><span class='fl'>0</span>, nrow<span class='op'>=</span><span class='fl'>3</span>, ncol<span class='op'>=</span><span class='fl'>24</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>0</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>1</span>,<span class='fl'>0</span>,<span class='fl'>1</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='op'>-</span><span class='fl'>1</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>,
        intercept<span class='op'>=</span><span class='cn'>FALSE</span>, transf<span class='op'>=</span><span class='va'>exp</span>, digits<span class='op'>=</span><span class='fl'>2</span><span class='op'>)</span>
</div><div class='output co'>#&gt; 
#&gt;   pred ci.lb ci.ub pi.lb pi.ub 
#&gt; 1 1.35  0.70  2.58  0.32  5.71 
#&gt; 2 1.58  0.72  3.43  0.35  7.10 
#&gt; 3 1.17  0.59  2.30  0.27  5.02 
#&gt; </div><div class='input'>
<span class='co'>### forest plot of ORs of interventions versus no contact</span>
<span class='fu'><a href='https://rdrr.io/r/grDevices/dev.html'>dev.new</a></span><span class='op'>(</span>width<span class='op'>=</span><span class='fl'>7</span>, height<span class='op'>=</span><span class='fl'>4</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mar<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>5</span>,<span class='fl'>4</span>,<span class='fl'>1</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='forest.html'>forest</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='va'>res</span><span class='op'>$</span><span class='va'>beta</span><span class='op'>[</span><span class='fl'>25</span><span class='op'>:</span><span class='fl'>27</span><span class='op'>]</span><span class='op'>)</span>, sei<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='va'>res</span><span class='op'>$</span><span class='va'>se</span><span class='op'>[</span><span class='fl'>25</span><span class='op'>:</span><span class='fl'>27</span><span class='op'>]</span><span class='op'>)</span>, psize<span class='op'>=</span><span class='fl'>1</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>3</span>,<span class='fl'>4</span><span class='op'>)</span>, digits<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>1</span><span class='op'>)</span>, efac<span class='op'>=</span><span class='fl'>2</span>,
       slab<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"No Contact"</span>, <span class='st'>"Self-Help"</span>, <span class='st'>"Individual Counseling"</span>, <span class='st'>"Group Counseling"</span><span class='op'>)</span>,
       atransf<span class='op'>=</span><span class='va'>exp</span>, at<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>.5</span>, <span class='fl'>1</span>, <span class='fl'>2</span>, <span class='fl'>4</span>, <span class='fl'>8</span><span class='op'>)</span><span class='op'>)</span>, xlab<span class='op'>=</span><span class='st'>"Odds Ratio for Intervention vs. No Contact"</span>,
       header<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Intervention"</span>, <span class='st'>"Odds Ratio [95% CI]"</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'>############################################################################</span>

<span class='co'>### restructure dataset to a contrast-based format</span>
<span class='va'>dat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='to.wide.html'>to.wide</a></span><span class='op'>(</span><span class='va'>dat.hasselblad1998</span>, study<span class='op'>=</span><span class='st'>"study"</span>, grp<span class='op'>=</span><span class='st'>"trt"</span>, ref<span class='op'>=</span><span class='st'>"no_contact"</span>, grpvars<span class='op'>=</span><span class='fl'>6</span><span class='op'>:</span><span class='fl'>7</span><span class='op'>)</span>

<span class='co'>### calculate log odds ratios for each treatment comparison</span>
<span class='va'>dat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='escalc.html'>escalc</a></span><span class='op'>(</span>measure<span class='op'>=</span><span class='st'>"OR"</span>, ai<span class='op'>=</span><span class='va'>xi.1</span>, n1i<span class='op'>=</span><span class='va'>ni.1</span>,
                            ci<span class='op'>=</span><span class='va'>xi.2</span>, n2i<span class='op'>=</span><span class='va'>ni.2</span>, add<span class='op'>=</span><span class='fl'>1</span><span class='op'>/</span><span class='fl'>2</span>, to<span class='op'>=</span><span class='st'>"all"</span>, data<span class='op'>=</span><span class='va'>dat</span><span class='op'>)</span>
<span class='va'>dat</span>
</div><div class='output co'>#&gt;    id study            authors year          trt.1 xi.1 ni.1          trt.2 
#&gt; 1   1     1        Reid et al. 1974 ind_counseling  363  714     no_contact 
#&gt; 2   2     2    Cottraux et al. 1983 grp_counseling   10  138     no_contact 
#&gt; 3   3     2    Cottraux et al. 1983 ind_counseling   23  140     no_contact 
#&gt; 4   4     3       Slama et al. 1990 ind_counseling    9  205     no_contact 
#&gt; 5   5     4    Jamrozik et al. 1984 ind_counseling  237 1561     no_contact 
#&gt; 6   6     5      Rabkin et al. 1984 ind_counseling    9   48     no_contact 
#&gt; 7   7     6   Decker and Evans 1989 ind_counseling   16   43      self_help 
#&gt; 8   8     7    Richmond et al. 1986 ind_counseling   31   98     no_contact 
#&gt; 9   9     8              Leung 1991 ind_counseling   26   95     no_contact 
#&gt; 10 10     9  Mothersill et al. 1988 grp_counseling   29  170      self_help 
#&gt; 11 11     9  Mothersill et al. 1988 ind_counseling   12   85      self_help 
#&gt; 12 12    10    Langford et al. 1983 ind_counseling   17   77     no_contact 
#&gt; 13 13    11       Gritz et al. 1992      self_help   77  694     no_contact 
#&gt; 14 14    12    Campbell et al. 1986      self_help   21  535     no_contact 
#&gt; 15 15    13     Sanders et al. 1989 ind_counseling  107  761     no_contact 
#&gt; 16 16    14    Hilleman et al. 1993 grp_counseling   20   74 ind_counseling 
#&gt; 17 17    15     Gillams et al. 1984 grp_counseling    3   26 ind_counseling 
#&gt; 18 18    16 Mogielnicki et al. 1986 grp_counseling   32  127      self_help 
#&gt; 19 19    17        Page et al. 1986 ind_counseling    8   90     no_contact 
#&gt; 20 20    18    Vetter and Ford 1990 ind_counseling   34  237     no_contact 
#&gt; 21 21    19  Williams and Hall 1988 grp_counseling    9   20     no_contact 
#&gt; 22 22    20    Pallonen et al. 1994      self_help   19  149     no_contact 
#&gt; 23 23    21     Russell et al. 1983 ind_counseling  143 1031     no_contact 
#&gt; 24 24    22 Stewart and Rosser 1982 ind_counseling   36  504     no_contact 
#&gt; 25 25    23     Russell et al. 1979 ind_counseling   73  675     no_contact 
#&gt; 26 26    24    Kendrick et al. 1995 ind_counseling   54  888     no_contact 
#&gt;    xi.2 ni.2  comp   design      yi     vi 
#&gt; 1    75  731 in-no    in-no  2.1964 0.0204 
#&gt; 2     9  140 gr-no gr-in-no  0.1232 0.2159 
#&gt; 3     9  140 in-no gr-in-no  1.0183 0.1639 
#&gt; 4     2  106 in-no    in-no  0.7035 0.5199 
#&gt; 5    58  549 in-no    in-no  0.4098 0.0241 
#&gt; 6     0   33 in-no    in-no  2.7797 2.1604 
#&gt; 7    20   49 in-se    in-se -0.1469 0.1796 
#&gt; 8     3  100 in-no    in-no  2.5649 0.3425 
#&gt; 9     1   31 in-no    in-no  2.0481 0.7516 
#&gt; 10   11   78 gr-se gr-in-se  0.2019 0.1427 
#&gt; 11   11   78 in-se gr-in-se -0.0018 0.1954 
#&gt; 12    6   39 in-no    in-no  0.3993 0.2574 
#&gt; 13   79  702 se-no    se-no -0.0158 0.0287 
#&gt; 14   18  671 se-no    se-no  0.3894 0.1040 
#&gt; 15   64  642 in-no    in-no  0.3874 0.0281 
#&gt; 16   12   76 gr-in    gr-in  0.6632 0.1626 
#&gt; 17    9   55 gr-in    gr-in -0.3161 0.4550 
#&gt; 18    7   66 gr-se    gr-se  0.9932 0.1914 
#&gt; 19    5   62 in-no    in-no  0.0743 0.3290 
#&gt; 20   20  234 in-no    in-no  0.5732 0.0873 
#&gt; 21    0   20 gr-no    gr-no  3.5225 2.2410 
#&gt; 22    8  116 se-no    se-no  0.6457 0.1858 
#&gt; 23   95 1107 in-no    in-no  0.5379 0.0196 
#&gt; 24   15  187 in-no    in-no -0.1427 0.0998 
#&gt; 25   78  584 in-no    in-no -0.2394 0.0300 
#&gt; 26   69 1177 in-no    in-no  0.0408 0.0348 </div><div class='input'>
<span class='co'>### calculate the variance-covariance matrix of the log odds ratios for multitreatment studies</span>
<span class='co'>### see Gleser &amp; Olkin (2009), equation (19.11), for the covariance equation</span>
<span class='va'>calc.v</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='op'>{</span>
   <span class='va'>v</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>/</span><span class='op'>(</span><span class='va'>x</span><span class='op'>$</span><span class='va'>xi.2</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>+</span><span class='fl'>1</span><span class='op'>/</span><span class='fl'>2</span><span class='op'>)</span> <span class='op'>+</span> <span class='fl'>1</span><span class='op'>/</span><span class='op'>(</span><span class='va'>x</span><span class='op'>$</span><span class='va'>ni.2</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='op'>-</span> <span class='va'>x</span><span class='op'>$</span><span class='va'>xi.2</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='op'>+</span> <span class='fl'>1</span><span class='op'>/</span><span class='fl'>2</span><span class='op'>)</span>, nrow<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>, ncol<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>)</span>
   <span class='fu'><a href='https://rdrr.io/r/base/diag.html'>diag</a></span><span class='op'>(</span><span class='va'>v</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='va'>x</span><span class='op'>$</span><span class='va'>vi</span>
   <span class='va'>v</span>
<span class='op'>}</span>
<span class='va'>V</span> <span class='op'>&lt;-</span> <span class='fu'><a href='bldiag.html'>bldiag</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/split.html'>split</a></span><span class='op'>(</span><span class='va'>dat</span>, <span class='va'>dat</span><span class='op'>$</span><span class='va'>study</span><span class='op'>)</span>, <span class='va'>calc.v</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'>### add contrast matrix to dataset</span>
<span class='va'>dat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='contrmat.html'>contrmat</a></span><span class='op'>(</span><span class='va'>dat</span>, grp1<span class='op'>=</span><span class='st'>"trt.1"</span>, grp2<span class='op'>=</span><span class='st'>"trt.2"</span><span class='op'>)</span>
<span class='va'>dat</span>
</div><div class='output co'>#&gt;    id study            authors year          trt.1 xi.1 ni.1          trt.2 
#&gt; 1   1     1        Reid et al. 1974 ind_counseling  363  714     no_contact 
#&gt; 2   2     2    Cottraux et al. 1983 grp_counseling   10  138     no_contact 
#&gt; 3   3     2    Cottraux et al. 1983 ind_counseling   23  140     no_contact 
#&gt; 4   4     3       Slama et al. 1990 ind_counseling    9  205     no_contact 
#&gt; 5   5     4    Jamrozik et al. 1984 ind_counseling  237 1561     no_contact 
#&gt; 6   6     5      Rabkin et al. 1984 ind_counseling    9   48     no_contact 
#&gt; 7   7     6   Decker and Evans 1989 ind_counseling   16   43      self_help 
#&gt; 8   8     7    Richmond et al. 1986 ind_counseling   31   98     no_contact 
#&gt; 9   9     8              Leung 1991 ind_counseling   26   95     no_contact 
#&gt; 10 10     9  Mothersill et al. 1988 grp_counseling   29  170      self_help 
#&gt; 11 11     9  Mothersill et al. 1988 ind_counseling   12   85      self_help 
#&gt; 12 12    10    Langford et al. 1983 ind_counseling   17   77     no_contact 
#&gt; 13 13    11       Gritz et al. 1992      self_help   77  694     no_contact 
#&gt; 14 14    12    Campbell et al. 1986      self_help   21  535     no_contact 
#&gt; 15 15    13     Sanders et al. 1989 ind_counseling  107  761     no_contact 
#&gt; 16 16    14    Hilleman et al. 1993 grp_counseling   20   74 ind_counseling 
#&gt; 17 17    15     Gillams et al. 1984 grp_counseling    3   26 ind_counseling 
#&gt; 18 18    16 Mogielnicki et al. 1986 grp_counseling   32  127      self_help 
#&gt; 19 19    17        Page et al. 1986 ind_counseling    8   90     no_contact 
#&gt; 20 20    18    Vetter and Ford 1990 ind_counseling   34  237     no_contact 
#&gt; 21 21    19  Williams and Hall 1988 grp_counseling    9   20     no_contact 
#&gt; 22 22    20    Pallonen et al. 1994      self_help   19  149     no_contact 
#&gt; 23 23    21     Russell et al. 1983 ind_counseling  143 1031     no_contact 
#&gt; 24 24    22 Stewart and Rosser 1982 ind_counseling   36  504     no_contact 
#&gt; 25 25    23     Russell et al. 1979 ind_counseling   73  675     no_contact 
#&gt; 26 26    24    Kendrick et al. 1995 ind_counseling   54  888     no_contact 
#&gt;    xi.2 ni.2  comp   design      yi     vi grp_counseling ind_counseling 
#&gt; 1    75  731 in-no    in-no  2.1964 0.0204              0              1 
#&gt; 2     9  140 gr-no gr-in-no  0.1232 0.2159              1              0 
#&gt; 3     9  140 in-no gr-in-no  1.0183 0.1639              0              1 
#&gt; 4     2  106 in-no    in-no  0.7035 0.5199              0              1 
#&gt; 5    58  549 in-no    in-no  0.4098 0.0241              0              1 
#&gt; 6     0   33 in-no    in-no  2.7797 2.1604              0              1 
#&gt; 7    20   49 in-se    in-se -0.1469 0.1796              0              1 
#&gt; 8     3  100 in-no    in-no  2.5649 0.3425              0              1 
#&gt; 9     1   31 in-no    in-no  2.0481 0.7516              0              1 
#&gt; 10   11   78 gr-se gr-in-se  0.2019 0.1427              1              0 
#&gt; 11   11   78 in-se gr-in-se -0.0018 0.1954              0              1 
#&gt; 12    6   39 in-no    in-no  0.3993 0.2574              0              1 
#&gt; 13   79  702 se-no    se-no -0.0158 0.0287              0              0 
#&gt; 14   18  671 se-no    se-no  0.3894 0.1040              0              0 
#&gt; 15   64  642 in-no    in-no  0.3874 0.0281              0              1 
#&gt; 16   12   76 gr-in    gr-in  0.6632 0.1626              1             -1 
#&gt; 17    9   55 gr-in    gr-in -0.3161 0.4550              1             -1 
#&gt; 18    7   66 gr-se    gr-se  0.9932 0.1914              1              0 
#&gt; 19    5   62 in-no    in-no  0.0743 0.3290              0              1 
#&gt; 20   20  234 in-no    in-no  0.5732 0.0873              0              1 
#&gt; 21    0   20 gr-no    gr-no  3.5225 2.2410              1              0 
#&gt; 22    8  116 se-no    se-no  0.6457 0.1858              0              0 
#&gt; 23   95 1107 in-no    in-no  0.5379 0.0196              0              1 
#&gt; 24   15  187 in-no    in-no -0.1427 0.0998              0              1 
#&gt; 25   78  584 in-no    in-no -0.2394 0.0300              0              1 
#&gt; 26   69 1177 in-no    in-no  0.0408 0.0348              0              1 
#&gt;    self_help no_contact 
#&gt; 1          0         -1 
#&gt; 2          0         -1 
#&gt; 3          0         -1 
#&gt; 4          0         -1 
#&gt; 5          0         -1 
#&gt; 6          0         -1 
#&gt; 7         -1          0 
#&gt; 8          0         -1 
#&gt; 9          0         -1 
#&gt; 10        -1          0 
#&gt; 11        -1          0 
#&gt; 12         0         -1 
#&gt; 13         1         -1 
#&gt; 14         1         -1 
#&gt; 15         0         -1 
#&gt; 16         0          0 
#&gt; 17         0          0 
#&gt; 18        -1          0 
#&gt; 19         0         -1 
#&gt; 20         0         -1 
#&gt; 21         0         -1 
#&gt; 22         1         -1 
#&gt; 23         0         -1 
#&gt; 24         0         -1 
#&gt; 25         0         -1 
#&gt; 26         0         -1 </div><div class='input'>
<span class='co'>### network meta-analysis using a contrast-based random-effects model</span>
<span class='co'>### by setting rho=1/2, tau^2 reflects the amount of heterogeneity for all treatment comparisons</span>
<span class='va'>res</span> <span class='op'>&lt;-</span> <span class='fu'><a href='rma.mv.html'>rma.mv</a></span><span class='op'>(</span><span class='va'>yi</span>, <span class='va'>V</span>, mods <span class='op'>=</span> <span class='op'>~</span> <span class='va'>self_help</span> <span class='op'>+</span> <span class='va'>ind_counseling</span> <span class='op'>+</span> <span class='va'>grp_counseling</span> <span class='op'>-</span> <span class='fl'>1</span>,
              random <span class='op'>=</span> <span class='op'>~</span> <span class='va'>comp</span> <span class='op'>|</span> <span class='va'>study</span>, rho<span class='op'>=</span><span class='fl'>1</span><span class='op'>/</span><span class='fl'>2</span>, data<span class='op'>=</span><span class='va'>dat</span><span class='op'>)</span>
<span class='va'>res</span>
</div><div class='output co'>#&gt; 
#&gt; Multivariate Meta-Analysis Model (k = 26; method: REML)
#&gt; 
#&gt; Variance Components:
#&gt; 
#&gt; outer factor: study (nlvls = 24)
#&gt; inner factor: comp  (nlvls = 6)
#&gt; 
#&gt;             estim    sqrt  fixed 
#&gt; tau^2      0.4324  0.6575     no 
#&gt; rho        0.5000            yes 
#&gt; 
#&gt; Test for Residual Heterogeneity:
#&gt; QE(df = 23) = 202.3334, p-val &lt; .0001
#&gt; 
#&gt; Test of Moderators (coefficients 1:3):
#&gt; QM(df = 3) = 14.2278, p-val = 0.0026
#&gt; 
#&gt; Model Results:
#&gt; 
#&gt;                 estimate      se    zval    pval    ci.lb   ci.ub 
#&gt; self_help         0.3888  0.3221  1.2070  0.2274  -0.2426  1.0202      
#&gt; ind_counseling    0.6864  0.1904  3.6055  0.0003   0.3133  1.0596  *** 
#&gt; grp_counseling    0.8438  0.3641  2.3176  0.0205   0.1302  1.5574    * 
#&gt; 
#&gt; ---
#&gt; Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1
#&gt; </div><div class='input'>
<span class='co'>### predicted odds ratios of interventions versus no contact</span>
<span class='fu'><a href='predict.rma.html'>predict</a></span><span class='op'>(</span><span class='va'>res</span>, newmods<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/diag.html'>diag</a></span><span class='op'>(</span><span class='fl'>3</span><span class='op'>)</span>, transf<span class='op'>=</span><span class='va'>exp</span>, digits<span class='op'>=</span><span class='fl'>2</span><span class='op'>)</span>
</div><div class='output co'>#&gt; 
#&gt;   pred ci.lb ci.ub pi.lb pi.ub 
#&gt; 1 1.48  0.78  2.77  0.35  6.20 
#&gt; 2 1.99  1.37  2.89  0.52  7.60 
#&gt; 3 2.33  1.14  4.75  0.53 10.14 
#&gt; </div><div class='input'>
<span class='co'>### fit random inconsistency effects model (see Law et al., 2016)</span>
<span class='va'>res</span> <span class='op'>&lt;-</span> <span class='fu'><a href='rma.mv.html'>rma.mv</a></span><span class='op'>(</span><span class='va'>yi</span>, <span class='va'>V</span>, mods <span class='op'>=</span> <span class='op'>~</span> <span class='va'>self_help</span> <span class='op'>+</span> <span class='va'>ind_counseling</span> <span class='op'>+</span> <span class='va'>grp_counseling</span> <span class='op'>-</span> <span class='fl'>1</span>,
              random <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>~</span> <span class='va'>comp</span> <span class='op'>|</span> <span class='va'>study</span>, <span class='op'>~</span> <span class='va'>comp</span> <span class='op'>|</span> <span class='va'>design</span><span class='op'>)</span>, rho<span class='op'>=</span><span class='fl'>1</span><span class='op'>/</span><span class='fl'>2</span>, phi<span class='op'>=</span><span class='fl'>1</span><span class='op'>/</span><span class='fl'>2</span>, data<span class='op'>=</span><span class='va'>dat</span><span class='op'>)</span>
<span class='va'>res</span>
</div><div class='output co'>#&gt; 
#&gt; Multivariate Meta-Analysis Model (k = 26; method: REML)
#&gt; 
#&gt; Variance Components:
#&gt; 
#&gt; outer factor: study (nlvls = 24)
#&gt; inner factor: comp  (nlvls = 6)
#&gt; 
#&gt;             estim    sqrt  fixed 
#&gt; tau^2      0.4324  0.6575     no 
#&gt; rho        0.5000            yes 
#&gt; 
#&gt; outer factor: design (nlvls = 8)
#&gt; inner factor: comp   (nlvls = 6)
#&gt; 
#&gt;             estim    sqrt  fixed 
#&gt; gamma^2    0.0000  0.0000     no 
#&gt; phi        0.5000            yes 
#&gt; 
#&gt; Test for Residual Heterogeneity:
#&gt; QE(df = 23) = 202.3334, p-val &lt; .0001
#&gt; 
#&gt; Test of Moderators (coefficients 1:3):
#&gt; QM(df = 3) = 14.2278, p-val = 0.0026
#&gt; 
#&gt; Model Results:
#&gt; 
#&gt;                 estimate      se    zval    pval    ci.lb   ci.ub 
#&gt; self_help         0.3888  0.3221  1.2070  0.2274  -0.2426  1.0202      
#&gt; ind_counseling    0.6864  0.1904  3.6055  0.0003   0.3133  1.0596  *** 
#&gt; grp_counseling    0.8438  0.3641  2.3176  0.0205   0.1302  1.5574    * 
#&gt; 
#&gt; ---
#&gt; Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1
#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Wolfgang Viechtbauer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


